import{t as v,i as _,o as Ae,c as $,a as p,s as k,p as Ve,d as S,b as E,e as V,f as u,M as q,g as R,F as L,S as U,h as N,m as O,j as Oe,k as ae,l as De,I as he,u as be,r as J,n as G,q as oe,v as Te,w as le,x as Fe,y as se,z as Re}from"./vendor.753ac034.js";const je=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}};je();const Be="spt-custom-quests-editor",ze="1.0.0",Ue="1.0.0",Je="Online editor for Custom Quests mod (Single Player Tarkov)",Ge={start:"vite",dev:"vite",build:"vite build",serve:"vite preview",lint:"eslint .  --max-warnings 0 --ext .ts,.tsx,.js","lint:all":"npm run lint && npm run prettier:check",prettier:"prettier --write .","prettier:check":"prettier --check .","test:all":"npm run lint:all && yarn run tsc && npm run build",tsc:"tsc -p . --noEmit",preversion:"npm run test:all",deploy:"npm run test:all && npm run gh-pages","gh-pages":"gh-pages -d dist -b gh-pages",clean:"rimraf dist"},We="MIT",Ke={"@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0",eslint:"^8.10.0","eslint-config-prettier":"^8.5.0","eslint-plugin-prettier":"^4.0.0","gh-pages":"^3.2.3",prettier:"^2.5.1",rimraf:"^3.0.2",typescript:"^4.6.2",vite:"^2.8.6","vite-plugin-solid":"^2.2.6"},Ze={"@types/ramda":"^0.28.1",ramda:"^0.28.0","solid-js":"^1.3.11"};var de={name:Be,version:ze,custom_quests_target_version:Ue,description:Je,scripts:Ge,license:We,devDependencies:Ke,dependencies:Ze};const Ye=v("<h2></h2>"),He=v('<h4>For <a target="_blank" href="https://hub.sp-tarkov.com/files/file/517-custom-quests/">Custom Quests</a> v</h4>'),Xe=e=>[(()=>{const t=Ye.cloneNode(!0);return t.style.setProperty("text-align","center"),_(t,()=>e.children),t})(),(()=>{const t=He.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return i.nextSibling,t.style.setProperty("position","absolute"),t.style.setProperty("margin","0"),t.style.setProperty("right","10px"),t.style.setProperty("top","6px"),i.style.setProperty("color","blue"),_(t,()=>e.customQuestsVersion,null),t})()],ue=()=>{},et=e=>{const t=e.onDropJson??ue,n=e.onDropInvalidJson??ue,[,i]=e.isDraggingSignal;i(!1);const r=document.getElementById("root");if(!r)return console.error("no root element found"),null;const l=a=>{i(!0),a.preventDefault()},o=a=>{i(!1),a.preventDefault()},d=a=>{i(!0),a.preventDefault()},s=a=>{if(i(!1),a.dataTransfer){const f=a.dataTransfer.files[0],c=new FileReader;c.onloadend=function(){if(typeof this.result=="string")try{const g=JSON.parse(this.result);t(f.name,g)}catch(g){n(g)}},c.readAsText(a.dataTransfer.files[0])}a.preventDefault()};return r.addEventListener("dragenter",l),r.addEventListener("dragleave",o),r.addEventListener("dragover",d),r.addEventListener("drop",s),Ae(()=>{r.removeEventListener("dragenter",l),r.removeEventListener("dragleave",o),r.removeEventListener("dragover",d),r.removeEventListener("drop",s)}),null},tt=v('<a><button type="button"></button></a>'),nt=e=>e.filter(t=>t.id!==""),rt=e=>e.map(t=>{if(t.rewards&&t.rewards.items){const n={},i=t.rewards.items;return Object.keys(i).forEach(r=>{r!==""&&(n[r]=i[r])}),{...t,rewards:{...t.rewards,items:n}}}return t}),it=e=>e.map(t=>{if(t.missions){const n=t.missions.map(i=>"accepted_items"in i?{...i,accepted_items:i.accepted_items.filter(r=>Boolean(r))}:i);return{...t,missions:n}}return t}),lt=e=>Ve(rt,nt,it)(e),st=e=>{const t=lt(e);return"data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,void 0,4))},at=e=>{const t=$(()=>e.loadedJsonFiles[e.selectedQuestFile??-1]),n=$(()=>t()?.name??""),i=$(()=>st(t()?.data??[]));return(()=>{const r=tt.cloneNode(!0),l=r.firstChild;return _(l,()=>`Download ${n()}`),p(o=>{const d=n(),s=i(),a=e.tabIndex;return d!==o._v$&&k(r,"download",o._v$=d),s!==o._v$2&&k(r,"href",o._v$2=s),a!==o._v$3&&k(l,"tabindex",o._v$3=a),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),r})()},$e={any:!0,customs:!0,factory:!0,laboratory:!0,interchange:!0,lighthouse:!0,reserve:!0,shoreline:!0,woods:!0},ot=Object.keys($e),H=Object.keys($e),dt=v('<div><label for="form_disabled">enabled: </label><input id="form_disabled" type="checkbox"></div>'),ut=e=>{const t=$(()=>!e.quest.disabled);return(()=>{const n=dt.cloneNode(!0),i=n.firstChild,r=i.nextSibling;return n.style.setProperty("padding","15px"),n.style.setProperty("padding-bottom","0px"),i.style.setProperty("display","inline-block"),i.style.setProperty("float","left"),i.style.setProperty("clear","left"),i.style.setProperty("width","180px"),i.style.setProperty("text-align","right"),i.style.setProperty("margin-right","10px"),r.addEventListener("change",l=>{e.updateQuest(o=>({...o,disabled:!l.currentTarget.checked}))}),p(l=>{const o=e.formIndex,d=t();return o!==l._v$&&k(r,"tabindex",l._v$=o),d!==l._v$2&&(r.checked=l._v$2=d),l},{_v$:void 0,_v$2:void 0}),n})()},ct=v('<div><label>: </label><input type="text"></div>'),_t=e=>(()=>{const t=ct.cloneNode(!0),n=t.firstChild,i=n.firstChild,r=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),_(n,()=>e.fieldName,i),r.$$input=l=>e.updateQuest(o=>({...o,[e.fieldName]:l.currentTarget.value})),r.style.setProperty("display","inline-block"),r.style.setProperty("float","left"),p(l=>{const o=`form_${e.fieldName}`,d=e.quest[e.fieldName],s=`form_${e.fieldName}`,a=e.formIndex;return o!==l._v$&&k(n,"for",l._v$=o),d!==l._v$2&&(r.value=l._v$2=d),s!==l._v$3&&k(r,"id",l._v$3=s),a!==l._v$4&&k(r,"tabindex",l._v$4=a),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})();S(["input"]);const X=["ch","cz","en","es-mx","es","fr","ge","hu","it","jp","kr","pl","po","ru","sk","tu"],ee=e=>X.includes(e),ft=e=>{if(typeof e=="string")return null;if(e){let t=!0;if(Object.keys(e).forEach(n=>{ee(n)||(t=!1)}),!t)return"Unknown locale names found"}return null},j=(e,t)=>{const n=ft(e);if(n!==null)throw new Error(`${n} for '${t}'`)},gt=v('<select><option value="set_locale">Set locale...</option></select>'),mt=v("<select></select>"),yt=v('<div><label>: </label><input type="text"></div>'),ce=v("<option></option>"),M=e=>{const[t,n]=E(null);V(s=>{if(s!==e.uniqId&&typeof e.questString=="object"){const a=Object.keys(e.questString)[0]??null;a&&n(a)}return e.uniqId});const i=s=>a=>{const f=a.currentTarget.value;ee(f)&&(n(f),e.updateQuestString(()=>({[f]:s})))},r=s=>{const a=s.currentTarget.value;ee(a)&&n(a)},l=$(()=>{if(typeof e.questString=="string")return e.questString;const s=t();return s&&typeof e.questString=="object"?e.questString[s]??"":""}),o=s=>{const a=s.currentTarget.value;if(typeof e.questString=="string"||e.questString===void 0){e.updateQuestString(()=>a);return}const f=t();f&&typeof e.questString=="object"&&e.updateQuestString(c=>!c||typeof c=="string"?{[f]:a}:{...c,[f]:a})},d=s=>typeof e.questString=="object"&&e.questString[s]?` : ${e.questString[s]}`:"";return(()=>{const s=yt.cloneNode(!0),a=s.firstChild,f=a.firstChild,c=a.nextSibling;return s.style.setProperty("padding-left","15px"),s.style.setProperty("padding-top","15px"),a.style.setProperty("display","inline-block"),a.style.setProperty("float","left"),a.style.setProperty("clear","left"),a.style.setProperty("width","180px"),a.style.setProperty("text-align","right"),a.style.setProperty("margin-right","10px"),_(a,()=>e.fieldName,f),c.$$input=o,c.style.setProperty("display","inline-block"),c.style.setProperty("float","left"),c.style.setProperty("width","180px"),_(s,u(U,{get children(){return[u(q,{get when(){return typeof e.questString=="string"||e.questString===void 0},get children(){const g=gt.cloneNode(!0);return g.firstChild,R(g,"change",i(e.questString)),_(g,u(L,{each:X,children:b=>(()=>{const m=ce.cloneNode(!0);return m.value=b,_(m,b),m})()}),null),p(()=>k(g,"tabindex",e.formIndex+1)),g}}),u(q,{get when(){return typeof e.questString=="object"},get children(){const g=mt.cloneNode(!0);return g.addEventListener("change",r),g.style.setProperty("max-width","180px"),_(g,u(L,{each:X,children:b=>(()=>{const m=ce.cloneNode(!0);return m.value=b,_(m,b,null),_(m,()=>d(b),null),p(()=>m.selected=t()===b),m})()})),p(()=>k(g,"tabindex",e.formIndex+1)),g}})]}}),null),p(g=>{const b=`form_${e.fieldName}`,m=e.formIndex,h=l(),I=`form_${e.fieldName}`;return b!==g._v$&&k(a,"for",g._v$=b),m!==g._v$2&&k(c,"tabindex",g._v$2=m),h!==g._v$3&&(c.value=g._v$3=h),I!==g._v$4&&k(c,"id",g._v$4=I),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),s})()};S(["input"]);const vt=v("<label></label>"),ht=v('<input type="text">'),bt=v('<input type="button" value="Ok">'),$t=v("<select></select>"),pt=v('<input type="button" value="Edit manually...">'),kt=v("<div></div>"),xt=v("<option></option>"),te=e=>{const[t,n]=E(!1);V(d=>(d!==e.uniqId&&n(!1),e.uniqId));const i=$(()=>{const d=[...e.allValues];return d.includes(e.value)||d.push(e.value),d}),r=d=>{const s=d.currentTarget.value;e.setValue?.(s),e.onSelectValue?.(s)},l=$(()=>`form_generic_dropdown_id_${e.fieldName}_${e.formIndex}`),o=()=>{const d=document.getElementById(l());d&&e.onSelectValue?.(d.value),n(!1)};return(()=>{const d=kt.cloneNode(!0);return _(d,u(N,{get when(){return Boolean(e.fieldName)},get children(){const s=vt.cloneNode(!0);return s.style.setProperty("display","inline-block"),s.style.setProperty("float","left"),s.style.setProperty("clear","left"),s.style.setProperty("width","180px"),s.style.setProperty("text-align","right"),s.style.setProperty("margin-right","10px"),_(s,()=>`${e.fieldName}: `),p(()=>k(s,"for",l())),s}}),null),_(d,u(U,{get children(){return[u(q,{get when(){return t()},get children(){return[(()=>{const s=ht.cloneNode(!0);return s.addEventListener("keypress",a=>{a.key==="Enter"&&o()}),s.$$input=a=>{const f=a.currentTarget.value;f&&e.setValue?.(f)},s.autofocus=!0,s.style.setProperty("display","inline-block"),s.style.setProperty("float","left"),s.style.setProperty("width","180px"),p(a=>{const f=l(),c=e.formIndex;return f!==a._v$&&k(s,"id",a._v$=f),c!==a._v$2&&k(s,"tabindex",a._v$2=c),a},{_v$:void 0,_v$2:void 0}),s})(),(()=>{const s=bt.cloneNode(!0);return s.$$click=()=>{o()},s.style.setProperty("display","inline-block"),s.style.setProperty("float","left"),p(()=>k(s,"tabindex",e.formIndex+1)),s})()]}}),u(q,{get when(){return!t()},get children(){return[(()=>{const s=$t.cloneNode(!0);return s.addEventListener("change",r),s.style.setProperty("display","inline-block"),s.style.setProperty("float","left"),s.style.setProperty("width","180px"),_(s,u(L,{get each(){return i()},children:a=>(()=>{const f=xt.cloneNode(!0);return f.value=a,_(f,a),p(()=>f.selected=a===e.value),f})()})),p(()=>k(s,"tabindex",e.formIndex)),s})(),u(N,{get when(){return e.editable},get children(){const s=pt.cloneNode(!0);return s.$$click=()=>{n(!0);const a=document.getElementById(l());a&&a.focus()},s.style.setProperty("display","inline-block"),s.style.setProperty("float","left"),p(()=>k(s,"tabindex",e.formIndex+1)),s}})]}})]}}),null),_(d,()=>e.children,null),p(()=>d.style.setProperty("padding",e.paddingValue?`${e.paddingValue}px`:"15px")),d})()};S(["input","click"]);const Pt=v('<input type="button" value="Cancel">'),It=v('<div><label></label><input type="button" tabindex="-1"><div></div></div>'),wt=v('<input type="button" value="Remove">'),ne=e=>{const[t,n]=E(!1),i=$(()=>`${e.uniqId}_${e.fieldName}`),r=$(()=>(e.possibleValues??[]).filter(l=>!e.values.includes(l)));return(()=>{const l=It.cloneNode(!0),o=l.firstChild,d=o.nextSibling,s=d.nextSibling;return l.style.setProperty("padding","15px"),o.style.setProperty("display","inline-block"),o.style.setProperty("float","left"),o.style.setProperty("clear","left"),o.style.setProperty("width","180px"),o.style.setProperty("text-align","right"),o.style.setProperty("margin-right","10px"),_(o,()=>`${e.fieldName}: `),d.$$click=()=>{n(!0)},s.style.setProperty("padding-left","180px"),_(s,u(N,{get when(){return t()},get children(){return u(te,{get editable(){return e.editable},formIndex:0,fieldName:"",get uniqId(){return`${i()}_add`},get allValues(){return r()},get value(){return`Select ${e.wordingButton} id...`},onSelectValue:a=>(n(!1),e.updateValues(f=>[a,...f])),get children(){const a=Pt.cloneNode(!0);return a.$$click=()=>{n(!1)},a.style.setProperty("display","inline-block"),a.style.setProperty("float","left"),a}})}}),null),_(s,u(L,{get each(){return e.values},children:(a,f)=>u(te,{get editable(){return e.editable},formIndex:0,fieldName:"",get uniqId(){return`${i()}_${f()}`},get allValues(){return r()},value:a,onSelectValue:c=>{e.updateValues(g=>g.map((b,m)=>m===f()?c:b))},get children(){const c=wt.cloneNode(!0);return c.$$click=()=>e.updateValues(g=>g.filter((b,m)=>m!==f())),c.style.setProperty("display","inline-block"),c.style.setProperty("float","left"),c}})}),null),p(a=>{const f=t(),c=`Add ${e.wordingButton} id...`;return f!==a._v$&&(d.disabled=a._v$=f),c!==a._v$2&&(d.value=a._v$2=c),a},{_v$:void 0,_v$2:void 0}),l})()};S(["click"]);const Nt={Kill:{type:"Kill"},GiveItem:{type:"GiveItem",accepted_items:[]},PlaceItem:{type:"PlaceItem",accepted_items:[],zone_id:"gazel"},PlaceBeacon:{type:"PlaceBeacon",zone_id:"gazel"},PlaceSignalJammer:{type:"PlaceSignalJammer",zone_id:"gazel"},VisitPlace:{type:"VisitPlace",place_id:"gazel"}},pe=["Kill","GiveItem","PlaceItem","PlaceBeacon","PlaceSignalJammer","VisitPlace"],ke=["Savage","AnyPmc","Usec","Bear"],St=e=>{if(e.locations!==void 0&&!Array.isArray(e.locations))throw new Error("invalid kill mission: 'locations' should be an array");e.locations.forEach(t=>{if(!t||typeof t!="string")throw new Error("invalid location found in kill mission")})},_e=e=>{if(!Array.isArray(e.accepted_items))throw new Error("invalid GiveItem 'accepted_items' field is missing or invalid for GiveItem mission");e.accepted_items.forEach(t=>{if(!t||typeof t!="string")throw new Error("invalid GiveItem 'accepted_items': ids should be a string")})},Z=e=>{if(!e.zone_id||typeof e.zone_id!="string")throw new Error("invalid given zone_id for mission");if(e.plant_time!==void 0&&typeof e.plant_time!="number")throw new Error("invalid plant_time type for mission, it should be a number");e.need_survive!==void 0&&j(e.need_survive,"need_survive")},qt={Kill:e=>{if(e.target!==void 0&&!ke.includes(e.target))throw new Error(`invalid kill mission target '${e.target}'`);if(St(e),e.count!==void 0&&typeof e.count!="number")throw new Error("invalid kill mission 'count', it should be a number")},GiveItem:e=>{if(_e(e),e.count!==void 0&&typeof e.count!="number")throw new Error("invalid GiveItem mission 'count', it should be a number");if(e.found_in_raid_only!==void 0&&typeof e.found_in_raid_only!="boolean")throw new Error("invalid GiveItem mission 'found_in_raid_only', it should be a boolean")},PlaceItem:e=>{Z(e),_e(e)},PlaceBeacon:e=>{Z(e)},PlaceSignalJammer:e=>{Z(e)},VisitPlace:e=>{if(!e.place_id||typeof e.place_id!="string")throw new Error("invalid given place_id for mission");e.need_survive!==void 0&&j(e.need_survive,"need_survive")}},Et=e=>{if(typeof e!="object")throw new Error("invalid mission, it should be an object");if(!pe.includes(e.type))throw new Error(`invalid mission 'type' field: '${e.type}'`);e.message!==void 0&&j(e.message,"message");const t=qt[e.type];if(!t)throw new Error("Fatal error: validation function not found");t(e)},re=["Completion","PickUp","Elimination","Loyalty","Discover"],Ct={rezervbase:"reserve",bigmap:"customs",labs:"laboratory","56f40101d2720b2a4d8b45d6":"customs","55f2d3fd4bdc2d5f408b4567":"factory","5714dbc024597771384a510d":"interchange","5b0fc42d86f7744a585f9105":"laboratory","5704e4dad2720bb55b8b4567":"lighthouse","5704e5fad2720bc05b8b4567":"reserve","5704e554d2720bac5b8b456e":"shoreline","5704e3c2d2720bac5b8b4567":"woods"},fe={"":"any",bigmap:"customs",rezervbase:"reserve",labs:"laboratory"},w=e=>new Error(e),Qt=e=>re.includes(e),Lt=e=>{if(!!e){if(e.xp!==void 0&&typeof e.xp!="number")throw w("'rewards.xp' should be a number");if(e.items!==void 0&&typeof e.items!="object")throw w("'rewards.items' should be an object");Object.keys(e.items).forEach(t=>{if(typeof t!="string")throw w("invalid key found in 'rewards.items'")}),Object.values(e.items).forEach(t=>{if(typeof t!="number")throw w("invalid value found in 'rewards.items', it should be a number")})}},Mt=e=>{const t=e;if(!t.id||typeof t.id!="string")throw w("no valid 'id' found");if(!t.trader_id||typeof t.trader_id!="string")throw w("no valid 'trader_id' found");if(t.disabled!==void 0&&t.disabled!==!0&&t.disabled!==!1)throw w("'disabled' should be a boolean");if(t.descriptive_location!==void 0&&typeof t.descriptive_location!="string")throw w("'descriptive_location' should be a string");if(t.descriptive_location!==void 0&&!H.includes(t.descriptive_location))throw w(`unknown 'descriptive_location' : ${t.descriptive_location}`);if(t.type&&!Qt(t.type))throw w("invalid quest 'type' provided");if(t.image!==void 0&&typeof t.image!="string")throw w("'image' should be a string");if(t.name!==void 0&&j(t.name,"name"),t.description!==void 0&&j(t.description,"description"),t.success_message!==void 0&&j(t.success_message,"success_message"),t.level_needed!==void 0&&typeof t.level_needed<"u")throw w("'level_needed' should be a number");if(t.locked_by_quests&&!Array.isArray(t.locked_by_quests))throw w("'locked_by_quests' should be an array");if(t.locked_by_quests&&t.locked_by_quests.forEach(n=>{if(typeof n!="string")throw new Error("invalid 'locked_by_quests' quest ids")}),t.unlock_on_quest_start&&!Array.isArray(t.unlock_on_quest_start))throw w("'unlock_on_quest_start' should be an array");if(t.unlock_on_quest_start&&t.unlock_on_quest_start.forEach(n=>{if(typeof n!="string")throw new Error("invalid 'unlock_on_quest_start' quest ids")}),t.rewards!==void 0&&Lt(t.rewards),t.missions!==void 0&&!Array.isArray(t.missions))throw w("'missions' should be an array");t.missions?.forEach(n=>{Et(n)})},At=e=>{const n=(Array.isArray(e)?e:[e]).map(i=>{const r=i.descriptive_location,l=i.missions??[];return{...i,missions:l.map(o=>o.locations&&o.locations.length?{...o,locations:o.locations.map(d=>fe[d]?fe[d]:d)}:o),descriptive_location:Ct[r??""]??r}});return n.forEach(i=>{Mt(i)}),n},Vt=v('<a target="_blank">: </a>'),Ot=v("<div><label></label><select></select></div>"),Dt=v("<option></option>"),A=e=>(()=>{const t=Ot.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),_(n,u(U,{get fallback(){return[O(()=>e.fieldName),": "]},get children(){return u(q,{get when(){return e.fieldLink},get children(){const r=Vt.cloneNode(!0),l=r.firstChild;return r.style.setProperty("color","#7777FF"),_(r,()=>e.fieldName,l),p(()=>k(r,"href",e.fieldLink)),r}})}})),i.addEventListener("change",r=>e.onValueChanged(r.currentTarget.value)),i.style.setProperty("display","inline-block"),i.style.setProperty("float","left"),i.style.setProperty("width","180px"),_(i,u(L,{get each(){return e.values},children:r=>(()=>{const l=Dt.cloneNode(!0);return l.value=r,_(l,r),p(()=>l.selected=r===e.selectedValue),l})()})),p(r=>{const l=`form_${e.fieldName}`,o=e.formIndex;return l!==r._v$&&k(n,"for",r._v$=l),o!==r._v$2&&k(i,"tabindex",r._v$2=o),r},{_v$:void 0,_v$2:void 0}),t})(),ge=["5a27c50f86f7740b3d65e16a","5a27c44386f7744237421af0","5a27cafa86f77424e20615d6","5a29221d86f77457303da9fa","5a29222486f77456f50d09e7","5ac4d8f186f774422237860d","5ac4d9aa86f7744784484abf","5ac4da0486f7744cc7701bdc","5ac4db0986f77442000164dd","5ac4dbb086f7743e7c61ca09","5ac4dc0486f77442000164e5","5ac4e02986f774617a185ef2","5ac4e06086f774623122ae42","5ac4e08086f774623122ae44","5ae4a7d286f7744748710d74","5ae4a7d986f7743fee0a75b2","5ae4a7dd86f77448464ed2b2","5ae4a74386f7744748710d72","5ae4a76086f774455f7d62d2","5ae325c586f77444fa45d0de","5ae326a086f77444fd36f5d8","5ae327a086f7745c7b3f2f38","5ae327e086f7742a4135935e","5ae3281c86f7745b3e3bf2d1","5ae3260986f7745b3e3bf2a7","5ae3274386f7745b4246b387","5b478d1b86f7744d1b23c60b","5b478eda86f77470315db899","5b4785f586f77470315db7ed","5b4786c586f7744d184ecabd","5b4787d086f7744d184ecb35","5b47863b86f7744d1c353203","5b47859886f7744d1b23c4f5","5b47867286f7744d1a393de9","5bc9fab686f7742a90020769","5bc481ec86f7740c8649a4f1","5c1e35cf86f7743b6242fe05","5c1e358f86f77408017f539f","5c7eb06188a4504aae56deb7","5d6e860186f774460f1f0602","5d6faf8f86f7743598553dd4","5d67b2a086f774131e206c05","5d67b3ed86f7744a2e70f15c","5d67b5ca86f7744dcc5e2f88","5d67b7ba86f774131e206c0c","5d67b41686f774368e1b78df","5d67b49186f774266f0867b3","5d67b66186f774266f0867b5","5d67bb8486f7744dcc5e2fb1","5d67c1e486f774131e206c3a","5d77a10586f7745041358b41","5d694a6b86f77452a94debdf","5d694c9086f77468c86a6ada","5d694cd886f77468c86a6adc","5d763d4886f774454e50d06d","5d6946c486f77452a8292cb2","5d6947c686f77452ac614b4b","5d6948e186f774238a38d8a7","5d69468a86f77452aa51d79d","5d66701986f7744a2e70f025","5d69470786f774238a38d844","5d69474486f77414077d1cc8","5d69483686f77414077d1cca","5e4d3a5186f77464185227f3","5e4d3a5886f77438b1632d82","5e383a6386f77465910ce1f3","5eda19f0edce541157209cee","5ee234c386f77447ee650e32","5f0f1f6c8f7810259b5fede0","5f0f202de269d61a4b5cf6ec","5fd9fad9c1ce6b1a3b486d00","57e4f1852459772a15635633","59bfebe686f7745ba3403da3","59c26dd986f77427033c3e83","59c26f2b86f7744a351903d3","59c133eb86f7740e7b544c71","59c273da86f77459b8017e7b","59c274ae86f77475060a9341","59c1285d86f77415042983dd","59c2729d86f77459c105de4d","59c2742286f77475ec568d92","59ca2e4186f77445e4732b22","60c373b71d348838124696ea","60c373e753bc0f18316351fe","60c375a0c2d86b57700e316b","60c3752d78280c17952e1e69","60c37450de6b0b44cc320e9a","60c37481c2d86b57700e3169","60c37416898b57521260e12a","60cb3814f09d61072d6cf211","61ab4ce156152b140448cf95","61ab4f090330382cea7bad57","61ab40a7edd0787ea26a69a6","61ab48bc5c890e40ca1a30f8","61ab383d3b7a0b53f515c515","61ab4381e4bbb01db226bce5","61ab38781b7da753125cfaa5","61ab421079c3a477d0121e46","61abc9240b56a53df32c6865","61abcd4c3b7a0b53f515c5e6","594d241f86f7740d8246218d","594d246986f77427fc3b2fb4","594d247486f77426ad2fd20b","594d248186f7740e670685db","596a20d286f7741ddb4815d5","596a108786f7741ddc2d31b1","596b453b86f77457c827bf44","596b465486f77457ca186188","597a0fad86f77426d464f995","597a172486f774799e5cd153","616d993bc8c5ad2ab30ff6ba","5968a09a86f7740d137ebfc5","5968ec2986f7741ddf17db83","5969f96786f7741dde183a4f","5979d3da86f774719f309082","5979d3ea86f7746d0b3e3fdc","5979d3f986f7746d08051ce0","5979d36d86f7746d093ddd7a","5979d37886f7746d0b3e3fdb","5979e80986f77437584fb8b2","5979ed4c86f7742f55674442","5979ef2a86f77431185415c3","5979f91c86f77402996bf9c2","5981c96e86f77477920d1a04","59675e7b86f77414b25fb049","59675f5486f77414b07f13d0","59689e1c86f7740d14064725","59689f8f86f7740d121082d7","60896b7bfa70fc097863b8f5","608974af4b05530f55550c21","5967532b86f77461fb2f333a","6089736efa70fc097863b8f6","5967505886f774590730dadc","5967611386f7741dfe4f46fb","5998365786f7745cb22fea42","6089743983426423753cd58a"],Tt="modulepreload",me={},Ft="/",Rt=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${Ft}${i}`,i in me)return;me[i]=!0;const r=i.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${l}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":Tt,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((d,s)=>{o.addEventListener("load",d),o.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},jt=v('<input type="number" min="0">'),Bt=v('<input type="button" value="Remove">'),zt=v('<div><input type="text" placeholder="Search for item..."><div></div></div>'),Ut=v('<div><label></label><input placeholder="Type item id..." type="text"><input type="button"></div>'),Jt=v("<div></div>");let xe=[],Pe={};Rt(()=>import("./en.00a3b785.js"),[]).then(e=>{const t=e.default.templates;Pe=t,xe=Object.keys(t).map(n=>[n,t[n]])});const Ie=e=>{const[t,n]=E(!1),[i,r]=E([]),l=$(()=>`${e.uniqQuestId}_${e.fieldName}_${String(e.index)}`);V(()=>(n(!1),r([]),l()));const o=$(()=>Pe[e.value]?.Name??void 0);return(()=>{const d=Ut.cloneNode(!0),s=d.firstChild,a=s.nextSibling,f=a.nextSibling;return d.style.setProperty("padding","15px"),d.style.setProperty("background-color","grey"),s.style.setProperty("display","inline-block"),s.style.setProperty("float","left"),s.style.setProperty("clear","left"),s.style.setProperty("width","180px"),s.style.setProperty("text-align","right"),s.style.setProperty("margin-right","10px"),_(s,()=>e.fieldName?`${e.fieldName} `:""),a.addEventListener("change",c=>e.onChange(c.currentTarget.value)),a.style.setProperty("width","320px"),_(d,u(N,{get when(){return e.onCounterChanged!==void 0},get children(){const c=jt.cloneNode(!0);return c.$$input=g=>e.onCounterChanged?.(Number(g.currentTarget.value)),c.style.setProperty("width","100px"),p(()=>c.value=e.count),c}}),f),f.$$click=()=>{const c=t();c&&r([]),n(!c)},_(d,u(N,{get when(){return e.onRemove},get children(){const c=Bt.cloneNode(!0);return c.$$click=()=>{r([]),n(!1),e.onRemove?.()},c}}),null),_(d,u(N,{get when(){return t()},get children(){const c=zt.cloneNode(!0),g=c.firstChild,b=g.nextSibling;return c.style.setProperty("display","inline-block"),c.style.setProperty("padding","10px"),c.style.setProperty("margin-top","20px"),c.style.setProperty("margin-left","180px"),g.$$input=m=>{const h=m.currentTarget.value,I=xe.filter(([,C])=>typeof C!="object"?!1:C.Name.toLowerCase().includes(h.trim().toLowerCase())).map(([C,F])=>[C,F.Name]);r(Oe(50)(I))},b.style.setProperty("padding","10px"),b.style.setProperty("color","black"),_(b,u(L,{get each(){return i()},children:([m,h])=>(()=>{const I=Jt.cloneNode(!0);return I.$$click=()=>e.onChange(m),I.style.setProperty("cursor","pointer"),I.style.setProperty("margin","1px"),_(I,h),p(C=>{const F=m===e.value?"white":"inherit",B=m===e.value?"green":"white";return F!==C._v$5&&I.style.setProperty("color",C._v$5=F),B!==C._v$6&&I.style.setProperty("background-color",C._v$6=B),C},{_v$5:void 0,_v$6:void 0}),I})()})),c}}),null),p(c=>{const g=o(),b=t(),m=e.value,h=t()?"Ok":"Search...";return g!==c._v$&&k(a,"title",c._v$=g),b!==c._v$2&&(a.disabled=c._v$2=b),m!==c._v$3&&(a.value=c._v$3=m),h!==c._v$4&&(f.value=c._v$4=h),c},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),d})()};S(["input","click"]);const Gt=v('<div><label>rewards.items: </label><input type="button" value="Add item"></div>'),Wt=e=>{const t=$(()=>Object.keys(e.rewards));return(()=>{const n=Gt.cloneNode(!0),i=n.firstChild,r=i.nextSibling;return n.style.setProperty("padding","15px"),i.style.setProperty("display","inline-block"),i.style.setProperty("clear","left"),i.style.setProperty("width","180px"),i.style.setProperty("text-align","right"),i.style.setProperty("margin-right","10px"),i.style.setProperty("margin-bottom","10px"),r.$$click=()=>{e.updateRewards(l=>({...l,[""]:1}))},_(n,u(he,{get each(){return t()},children:(l,o)=>u(Ie,{index:o,get count(){return e.rewards[l()]??1},onCounterChanged:d=>e.updateRewards(ae(s=>{s[l()]=d})),fieldName:"",get uniqQuestId(){return`${e.uniqQuestId}_${o}`},get value(){return l()},onChange:d=>{e.updateRewards(ae(s=>{d!==l()&&(s[d]?s[d]+=s[l()]:s[d]=s[l()],delete s[l()])}))},onRemove:()=>{e.updateRewards(d=>De([l()],d))}})}),null),n})()};S(["click"]);const Kt=v('<div><label></label><input type="number"></div>'),z=e=>(()=>{const t=Kt.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),_(n,()=>e.fieldName),i.$$input=r=>e.setValue(Number(r.currentTarget.value)),p(r=>{const l=`form_${e.fieldName}`,o=e.min,d=e.max,s=e.value;return l!==r._v$&&k(n,"for",r._v$=l),o!==r._v$2&&k(i,"min",r._v$2=o),d!==r._v$3&&k(i,"max",r._v$3=d),s!==r._v$4&&(i.value=r._v$4=s),r},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})();S(["input"]);const Zt=v("<div><span>Choose a type of mission:</span><div></div></div>"),Yt=v('<input type="button">'),Ht=e=>(()=>{const t=Zt.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("margin-bottom","5px"),t.style.setProperty("padding","15px"),t.style.setProperty("background-color","#333333"),t.style.setProperty("color","white"),n.style.setProperty("display","inline-block"),n.style.setProperty("margin-right","10px"),n.style.setProperty("margin-bottom","10px"),_(i,u(L,{each:pe,children:r=>(()=>{const l=Yt.cloneNode(!0);return l.$$click=()=>e.onClickType(r),l.style.setProperty("margin-right","13px"),l.value=r,l})()})),t})();S(["click"]);const Xt=v('<div><label>accepted_items: </label><input type="button" value="Add item"></div>'),we=e=>(()=>{const t=Xt.cloneNode(!0),n=t.firstChild,i=n.nextSibling;return t.style.setProperty("padding","15px"),n.style.setProperty("display","inline-block"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),n.style.setProperty("margin-bottom","10px"),i.$$click=()=>{e.updateItems(r=>[...r,""])},_(t,u(L,{get each(){return e.items},children:(r,l)=>u(Ie,{get index(){return l()},fieldName:"",get uniqQuestId(){return`${e.uniqId}_${l()}`},value:r,onChange:o=>{e.updateItems(d=>be(l(),o,d))},onRemove:()=>{e.updateItems(o=>J(l(),1,o))}})}),null),t})();S(["click"]);const en=v('<div><label for="form_found_in_raid_only">found_in_raid_only: </label><input id="form_found_in_raid_only" type="checkbox"></div>'),tn=e=>{const t=$(()=>Boolean(e.mission.found_in_raid_only));return(()=>{const n=en.cloneNode(!0),i=n.firstChild,r=i.nextSibling;return n.style.setProperty("padding","15px"),n.style.setProperty("padding-bottom","0px"),i.style.setProperty("display","inline-block"),i.style.setProperty("float","left"),i.style.setProperty("clear","left"),i.style.setProperty("width","180px"),i.style.setProperty("text-align","right"),i.style.setProperty("margin-right","10px"),r.addEventListener("change",l=>{e.updateMission(o=>({...o,found_in_raid_only:l.currentTarget.checked}))}),p(l=>{const o=e.formIndex,d=t();return o!==l._v$&&k(r,"tabindex",l._v$=o),d!==l._v$2&&(r.checked=l._v$2=d),l},{_v$:void 0,_v$2:void 0}),n})()},nn=e=>{const t=$(()=>`${e.questId}_give_item_${e.index}`),n=$(()=>e.mission.count??0);return[O(()=>e.children),u(M,{formIndex:-1,updateQuestString:i=>e.updateMission(r=>({...r,message:i(r.message)})),get uniqId(){return t()},get questString(){return e.mission.message},fieldName:"message"}),u(z,{fieldName:"count",get value(){return n()},setValue:i=>e.updateMission(r=>({...r,count:i}))}),u(tn,{get mission(){return e.mission},get updateMission(){return e.updateMission}}),u(we,{updateItems:i=>{e.updateMission(r=>({...r,accepted_items:i(r.accepted_items)}))},get items(){return e.mission.accepted_items},get uniqId(){return t()}})]},rn=e=>{const t=$(()=>e.mission.target??"Savage"),n=$(()=>e.mission.count??0),i=$(()=>`${e.questId}_mission_kill_${e.index}`),r=$(()=>e.mission.locations??[]);return[O(()=>e.children),u(M,{formIndex:-1,updateQuestString:l=>e.updateMission(o=>({...o,message:l(o.message)})),get uniqId(){return i()},get questString(){return e.mission.message},fieldName:"message"}),u(A,{fieldName:"target",formIndex:18,values:ke,get selectedValue(){return t()},onValueChanged:l=>e.updateMission(o=>({...o,target:l}))}),u(z,{fieldName:"count",get value(){return n()},setValue:l=>e.updateMission(o=>({...o,count:l}))}),u(ne,{wordingButton:"locations",possibleValues:ot,get values(){return r()},updateValues:l=>{e.updateMission(o=>({...o,locations:l(r())}))},get uniqId(){return i()},fieldName:"locations"})]},ln=v('<label for="form_disabled">need_survive: </label>'),sn=v('<input type="checkbox">'),Ne=e=>{const t=$(()=>e.mission.need_survive!==void 0&&e.mission.need_survive!=="null");return[(()=>{const n=ln.cloneNode(!0);return n.style.setProperty("display","inline-block"),n.style.setProperty("float","left"),n.style.setProperty("clear","left"),n.style.setProperty("width","180px"),n.style.setProperty("text-align","right"),n.style.setProperty("margin-right","10px"),n})(),(()=>{const n=sn.cloneNode(!0);return n.addEventListener("change",i=>{e.updateMission(r=>i.currentTarget.checked?{...r,need_survive:""}:{...r,need_survive:void 0})}),p(i=>{const r=`form_place_item_need_survive_${e.uniqId}`,l=t();return r!==i._v$&&k(n,"id",i._v$=r),l!==i._v$2&&(n.checked=i._v$2=l),i},{_v$:void 0,_v$2:void 0}),n})(),u(N,{get when(){return t()},get children(){return u(M,{fieldName:"survive message",formIndex:-1,get uniqId(){return e.uniqId},get questString(){return e.mission.need_survive},updateQuestString:n=>e.updateMission(i=>({...i,need_survive:n(i.need_survive)}))})}})]},W={bigmap:["gazel","place_peacemaker_007_N1","place_peacemaker_002_N1","place_peacemaker_002_N2","place_peacemaker_002_N3","extraction_zone_zibbo","fuel1","fuel2","fuel3","fuel4","place_skier_12_2","place_skier_11_3","Q019_3"],woods:["place_peacemaker_007_2_N2","place_peacemaker_007_2_N2_1","place_THX_15","bar_fuel3_1","bar_fuel3_2","bar_fuel3_3","place_skier_12_3","place_skier_11_2","huntsman_005_1","huntsman_005_2"],shoreline:["place_peacemaker_007_2_N3","place_peacemaker_008_2_N1","place_peacemaker_008_2_N2","place_peacemaker_003_N1","place_peacemaker_003_N2","place_peacemaker_003_N3","place_peacemaker_005_N1","place_peacemaker_005_N2","place_peacemaker_010_2","place_SIGNAL_03_1","place_SIGNAL_03_2","place_SIGNAL_03_3","place_peacemaker_001","ter_013_area_1","ter_013_area_2","ter_013_area_3","skier_022_area_1","skier_022_area_2","skier_022_area_3","prapor_022_area_1","prapor_022_area_2","prapor_022_area_3"],interchange:["place_WARBLOOD_04_1","place_WARBLOOD_04_2","place_WARBLOOD_04_3","place_skier_12_1","place_skier_11_1","place_merch_21_1","place_merch_21_2","place_merch_21_3","place_merch_020_1","place_merch_020_2"],factory:["place_SADOVOD_01_1","place_SADOVOD_01_2","case_extraction","ter_017_area_1"],lighthouse:["qlight_pr1_heli1_mark","qlight_mark_vech1","qlight_mark_vech2","qlight_mark_vech3","qlight_mark_vech4","qlight_fuel_blood","qlight_fuel_blood_bezovoz1","qlight_fuel_blood_bezovoz2","qlight_fuel_blood_bezovoz3","qlight16_peace_terra"],rezervbase:["tadeush_bmp2_area_mark_2","tadeush_bmp2_area_mark_11","tadeush_bmp2_area_mark_12","tadeush_bmp2_area_mark_13","tadeush_stryker_area_mark_3","baraholshik_fuel_area_2","baraholshik_fuel_area_3"]},Se=Object.keys(W),an=e=>Se.find(t=>W[t].includes(e)),on=e=>{const[t,n]=E("bigmap"),[i,r]=E(0),l=$(()=>W[t()]);return V(o=>(o!==void 0&&o!==i()&&e.updateMission(d=>({...d,zone_id:W[t()][0]})),i())),V(o=>{if(o!==e.mission.zone_id){const d=an(e.mission.zone_id);d&&n(d)}return e.mission.zone_id}),[u(A,{fieldName:"map",formIndex:-1,values:Se,get selectedValue(){return t()},onValueChanged:o=>{n(o),r(d=>d+1)}}),u(A,{fieldName:"zone_id",fieldLink:"https://github.com/guillaumearm/aki_CustomQuests/blob/master/docs/ALL_ZONES.md",formIndex:-1,get values(){return l()},get selectedValue(){return e.mission.zone_id},onValueChanged:o=>{e.updateMission(d=>({...d,zone_id:o}))}})]},Y=e=>{const t=$(()=>`${e.questId}_place_item_${e.index}`),n=$(()=>e.mission.plant_time??30);return[O(()=>e.children),u(M,{formIndex:-1,updateQuestString:i=>e.updateMission(r=>({...r,message:i(r.message)})),get uniqId(){return t()},get questString(){return e.mission.message},fieldName:"message"}),u(on,{get mission(){return e.mission},get updateMission(){return e.updateMission}}),u(z,{fieldName:"plant_time",get value(){return n()},setValue:i=>e.updateMission(r=>({...r,plant_time:i}))}),u(Ne,{get uniqId(){return t()},get mission(){return e.mission},updateMission:i=>e.updateMission(r=>i(r))}),u(N,{get when(){return e.mission.type==="PlaceItem"},get children(){return u(we,{updateItems:i=>{e.updateMission(r=>({...r,accepted_items:i(r.accepted_items)}))},get items(){return e.mission.accepted_items},get uniqId(){return t()}})}})]},K={bigmap:["gazel","dead_posylni","vremyan_case","room206_water","vaz_feld","room114","room214","bomj_place","place_SADOVOD_03"],woods:["bunker2","ter_015_area_1","huntsman_001","pr_scout_col","pr_scout_base"],shoreline:["place_peacemaker_007_1_N1","place_peacemaker_010_3","place_peacemaker_004_N1","place_peacemaker_004_N2","place_peacemaker_009_2","place_peacemaker_009_3_N1","place_peacemaker_005_N1","place_peacemaker_005_N2","place_peacemaker_010_2","huntsman_026","place_peacemaker_008_4_N1","place_peacemaker_008_4_N2","place_peacemaker_001","place_SIGNAL_01_1","place_SIGNAL_01_2","place_meh_sanitar_room","huntsman_024_1","huntsman_024_2","huntsman_024_3","ter_023_area_1_1","ter_023_area_3_1","ter_023_area_2_1"],interchange:["place_SALE_03_AVOKADO","place_SALE_03_KOSTIN","place_SALE_03_TREND","place_SALE_03_DINO","place_SALE_03_TOPBRAND"],factory:["pumproom","place_pacemaker_SCOUT_01","place_pacemaker_SCOUT_02","place_pacemaker_SCOUT_03","ter_017_area_1","locked_office"],lighthouse:["qlight_pr1_heli1_find","qlight_hunt_fr_find","qlight_find_light_merchant","qlight_find_crushed_heli","qlight_find_scav_group1"],rezervbase:["huntsman_029","prapor_024_area_2","prapor_024_area_1","tadeush_bmp2_area_check_2","tadeush_bmp2_area_check_11","tadeush_bmp2_area_check_12","tadeush_bmp2_area_check_13","tadeush_stryker_area_check_3","tadeush_stryker_area_check_4","tadeush_t90_area_check_1","mechanik_exit_area_1","prapor_025_area_1","prapor_025_area_2","prapor_025_area_3","prapor_025_area_4","prapor_025_area_5","baraholshik_arsenal_area_1","baraholshik_dejurniy_area_2","baraholshik_arsenal_area_3","baraholshik_arsenal_area_4","baraholshik_arsenal_area_5"],laboratory:["peace_027_area"]},qe=Object.keys(K),dn=e=>qe.find(t=>K[t].includes(e)),un=e=>{const[t,n]=E("bigmap"),[i,r]=E(0),l=$(()=>K[t()]);return V(o=>(o!==void 0&&o!==i()&&e.updateMission(d=>({...d,place_id:K[t()][0]})),i())),V(o=>{if(o!==e.mission.place_id){const d=dn(e.mission.place_id);d&&n(d)}return e.mission.place_id}),[u(A,{fieldName:"map",formIndex:-1,values:qe,get selectedValue(){return t()},onValueChanged:o=>{n(o),r(d=>d+1)}}),u(A,{fieldName:"place_id",fieldLink:"https://github.com/guillaumearm/aki_CustomQuests/blob/master/docs/ALL_PLACES.md",formIndex:-1,get values(){return l()},get selectedValue(){return e.mission.place_id},onValueChanged:o=>{e.updateMission(d=>({...d,place_id:o}))}})]},cn=v("<br>"),_n=e=>[O(()=>e.children),u(M,{formIndex:-1,updateQuestString:t=>e.updateMission(n=>({...n,message:t(n.message)})),get uniqId(){return e.questId},get questString(){return e.mission.message},fieldName:"message"}),u(un,{get mission(){return e.mission},get updateMission(){return e.updateMission}}),cn.cloneNode(!0),u(Ne,{get uniqId(){return e.questId},get mission(){return e.mission},updateMission:t=>e.updateMission(n=>t(n))})],fn=v("<h4> mission</h4>"),gn=v('<input type="button" value="Remove">'),mn=v('<input type="button" value="Up">'),yn=v('<input type="button" value="Down">'),ie=v("<div></div>"),vn=v('<input type="button" value="Add a mission...">'),hn=v('<div><input type="button" value="Cancel"></div>'),bn=e=>{const t=$(()=>[(()=>{const n=fn.cloneNode(!0),i=n.firstChild;return n.style.setProperty("margin","0"),n.style.setProperty("width","90%"),n.style.setProperty("display","inline-block"),_(n,()=>e.mission.type,i),n})(),(()=>{const n=gn.cloneNode(!0);return R(n,"click",e.onRemoveMission,!0),n.style.setProperty("top","0px"),n.style.setProperty("float","right"),n})(),(()=>{const n=mn.cloneNode(!0);return n.$$click=()=>e.onClickUp(e.index),p(()=>n.disabled=e.index===0),n})(),(()=>{const n=yn.cloneNode(!0);return n.$$click=()=>e.onClickDown(e.index),p(()=>n.disabled=e.index===e.nbMissions-1),n})()]);return(()=>{const n=ie.cloneNode(!0);return n.style.setProperty("padding","15px"),n.style.setProperty("background-color","#333333"),n.style.setProperty("color","white"),_(n,u(U,{get fallback(){return`Unknown mission type '${e.mission.type}'`},get children(){return[u(q,{get when(){return e.mission.type==="Kill"},get children(){return u(rn,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),u(q,{get when(){return e.mission.type==="GiveItem"},get children(){return u(nn,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),u(q,{get when(){return e.mission.type==="PlaceItem"},get children(){return u(Y,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),u(q,{get when(){return e.mission.type==="PlaceBeacon"},get children(){return u(Y,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),u(q,{get when(){return e.mission.type==="PlaceSignalJammer"},get children(){return u(Y,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}}),u(q,{get when(){return e.mission.type==="VisitPlace"},get children(){return u(_n,{get questId(){return e.questId},get index(){return e.index},get mission(){return e.mission},get updateMission(){return e.updateMission},get children(){return t()}})}})]}})),n})()},$n=e=>{const[t,n]=E(!1),i=$(()=>e.quest.missions??[]),r=s=>{const a=Nt[s];e.updateQuest(f=>{const c=f.missions??[];return{...f,missions:[...c,a]}}),n(!1)},l=s=>{e.updateQuest(a=>{const f=a.missions??[];return{...a,missions:J(s,1,f)}})},o=s=>{e.updateQuest(a=>{const f=a.missions??[];return s===0?a:{...a,missions:G(s,s-1,f)}})},d=s=>{e.updateQuest(a=>{const f=a.missions??[];return s===f.length-1?a:{...a,missions:G(s,s+1,f)}})};return(()=>{const s=ie.cloneNode(!0);return s.style.setProperty("padding","15px"),_(s,u(he,{get each(){return i()},children:(a,f)=>(()=>{const c=ie.cloneNode(!0);return c.style.setProperty("padding","15px"),c.style.setProperty("background-color","grey"),_(c,u(bn,{get nbMissions(){return i().length},onClickUp:o,onClickDown:d,get questId(){return e.quest.id},index:f,onRemoveMission:()=>l(f),updateMission:g=>e.updateQuest(b=>{const m=b.missions??[],h=be(f,g(a()),m);return{...b,missions:h}}),get mission(){return a()}})),c})()}),null),_(s,u(N,{get when(){return!t()},get children(){const a=vn.cloneNode(!0);return a.$$click=()=>n(!0),a}}),null),_(s,u(N,{get when(){return t()},get children(){const a=hn.cloneNode(!0),f=a.firstChild;return a.style.setProperty("padding","15px"),a.style.setProperty("background-color","grey"),f.$$click=()=>n(!1),_(a,u(Ht,{onClickType:r}),null),a}}),null),s})()};S(["click"]);const pn=v('<div id="quest_form"><div><h4>Quest configuration</h4><input type="button" value="UP"><input type="button" value="DOWN"><input type="button" value="Duplicate quest"><input type="button" value="Remove quest"></div><form><h2>Missions</h2></form></div>'),kn=["prapor","therapist","fence","skier","peacekeeper","mechanic","ragman","jaeger"],xn=e=>{const t=$(()=>`${e.quest.id}_${e.questIndex}`),n=$(()=>e.quest.rewards?.items??{}),i=$(()=>e.quest.locked_by_quests??[]),r=$(()=>e.quest.unlock_on_quest_start??[]);return(()=>{const l=pn.cloneNode(!0),o=l.firstChild,d=o.firstChild,s=d.nextSibling,a=s.nextSibling,f=a.nextSibling,c=f.nextSibling,g=o.nextSibling,b=g.firstChild;return l.style.setProperty("border","1px solid black"),l.style.setProperty("margin","1px"),l.style.setProperty("padding","10px"),l.style.setProperty("width","60%"),l.style.setProperty("height","90%"),l.style.setProperty("overflow-y","scroll"),l.style.setProperty("background-color","lightgrey"),l.style.setProperty("float","left"),o.style.setProperty("padding","10px"),o.style.setProperty("background-color","grey"),d.style.setProperty("margin","0"),d.style.setProperty("text-align","center"),R(s,"click",e.onMoveUp,!0),s.style.setProperty("margin","0px"),R(a,"click",e.onMoveDown,!0),a.style.setProperty("margin","0px"),R(f,"click",e.onDupliacteQuest,!0),f.style.setProperty("margin","0px"),R(c,"click",e.onRemove,!0),c.style.setProperty("float","right"),c.style.setProperty("margin","0px"),g.addEventListener("submit",()=>{}),g.style.setProperty("margin-left","21px"),_(g,u(ut,oe({formIndex:2},e)),b),_(g,u(_t,oe({formIndex:4},e,{fieldName:"id"})),b),_(g,u(te,{formIndex:6,fieldName:"trader_id",get uniqId(){return t()},allValues:kn,get value(){return e.quest.trader_id},setValue:m=>e.updateQuest(h=>({...h,trader_id:m}))}),b),_(g,u(M,{formIndex:8,updateQuestString:m=>e.updateQuest(h=>({...h,name:m(h.name)})),get uniqId(){return t()},get questString(){return e.quest.name},fieldName:"name"}),b),_(g,u(M,{formIndex:10,updateQuestString:m=>e.updateQuest(h=>({...h,description:m(h.description)})),get uniqId(){return t()},get questString(){return e.quest.description},fieldName:"description"}),b),_(g,u(M,{formIndex:12,updateQuestString:m=>e.updateQuest(h=>({...h,success_message:m(h.success_message)})),get uniqId(){return t()},get questString(){return e.quest.success_message},fieldName:"success_message"}),b),_(g,u(A,{fieldName:"type",formIndex:14,values:re,get selectedValue(){return e.quest.type??re[0]},onValueChanged:m=>e.updateQuest(h=>({...h,type:m}))}),b),_(g,u(A,{fieldName:"descriptive_location",formIndex:16,values:H,get selectedValue(){return e.quest.descriptive_location??H[0]},onValueChanged:m=>e.updateQuest(h=>({...h,descriptive_location:m}))}),b),_(g,u(A,{fieldName:"image",formIndex:18,values:ge,get selectedValue(){return e.quest.image??ge[0]},onValueChanged:m=>e.updateQuest(h=>({...h,image:m}))}),b),_(g,u(z,{min:1,fieldName:"level_needed",get value(){return e.quest.level_needed??1},setValue:m=>e.updateQuest(h=>({...h,level_needed:m}))}),b),_(g,u(ne,{editable:!0,wordingButton:"quest",get possibleValues(){return e.allQuestIds},get values(){return i()},updateValues:m=>e.updateQuest(h=>({...h,locked_by_quests:m(i())})),get uniqId(){return t()},fieldName:"locked_by_quests"}),b),_(g,u(ne,{editable:!0,wordingButton:"quest",get possibleValues(){return e.allQuestIds},get values(){return r()},updateValues:m=>e.updateQuest(h=>({...h,unlock_on_quest_start:m(r())})),get uniqId(){return t()},fieldName:"unlock_on_quest_start"}),b),_(g,u(z,{fieldName:"rewards.xp",get value(){return e.quest.rewards?.xp??0},setValue:m=>e.updateQuest(h=>({...h,rewards:{...h.rewards,xp:m}}))}),b),_(g,u(Wt,{updateRewards:m=>e.updateQuest(h=>({...h,rewards:{...h.rewards,items:{...m(h.rewards?.items??{})}}})),get uniqQuestId(){return t()},get rewards(){return n()}}),b),_(g,u($n,{get quest(){return e.quest},get updateQuest(){return e.updateQuest}}),null),p(m=>{const h=e.questIndex===0,I=e.questIndex===e.nbQuests-1;return h!==m._v$&&(s.disabled=m._v$=h),I!==m._v$2&&(a.disabled=m._v$2=I),m},{_v$:void 0,_v$2:void 0}),l})()};S(["click"]);const Pn=v("<div><div><h4></h4></div><ul></ul></div>"),In=v('<input type="text">'),wn=v('<input type="button" value="Ok">'),Nn=v("<li></li>"),Sn=(e=!1,t=!1)=>{const n=()=>t&&e?"#606060":t?"#AAAAAA":e?"#303030":"inherit",i=()=>t?"inherit":e?"white":"inherit";return{"margin-bottom":"1px",border:"1px solid grey","text-align":"center","overflow-x":"scroll",cursor:"pointer","background-color":n(),color:i(),"text-decoration":t?"line-through":"inherit"}},Ee=e=>(()=>{const t=Pn.cloneNode(!0),n=t.firstChild,i=n.firstChild,r=n.nextSibling;return t.style.setProperty("border","1px solid black"),t.style.setProperty("margin","1px"),t.style.setProperty("padding","10px"),t.style.setProperty("width","15%"),t.style.setProperty("height","90%"),t.style.setProperty("overflow-y","scroll"),t.style.setProperty("float","left"),n.style.setProperty("text-align","center"),_(i,()=>e.title),r.style.setProperty("padding","0"),r.style.setProperty("padding-bottom","20px"),r.style.setProperty("white-space","nowrap"),_(r,()=>e.children),p(()=>t.style.setProperty("background-color",e.isDragging?"#505050":"lightgrey")),t})(),Ce=e=>{const[t,n]=E(e.text),[i,r]=E(Boolean(e.enableEdition&&e.text==="new_quest_file")),l=$(()=>`${e.index}_${Boolean(e.enableEdition)}`),o=()=>{e.onEditEnter?.(t(),e.index),r(!1)};return V(()=>{const d=document.getElementById(l());return d&&(d.focus(),d.select()),i()}),(()=>{const d=Nn.cloneNode(!0);return d.$$click=()=>e.onClick(),d.$$dblclick=()=>e.enableEdition&&!i()&&r(!0),_(d,u(U,{get children(){return[u(q,{get when(){return i()},get children(){return[(()=>{const s=In.cloneNode(!0);return s.$$input=a=>n(a.currentTarget.value),s.addEventListener("keypress",a=>{a.key==="Enter"&&o()}),s.style.setProperty("width","80%"),p(a=>{const f=l(),c=t();return f!==a._v$&&k(s,"id",a._v$=f),c!==a._v$2&&(s.value=a._v$2=c),a},{_v$:void 0,_v$2:void 0}),s})(),(()=>{const s=wn.cloneNode(!0);return s.$$click=()=>o(),s.style.setProperty("width","15%"),s})()]}}),u(q,{get when(){return!i()},get children(){return e.text}})]}})),p(s=>Te(d,Sn(e.selected,!!e.disabled),s)),d})()};S(["dblclick","click","input"]);const qn=v('<div><input type="button" value="Create new file..."></div>'),En=e=>{const t=e.split(".json");return t.length>=2?le(1,t).join(".json"):e},Cn=e=>u(Ee,{get isDragging(){return e.isDragging()},title:"Quest files",get children(){return[u(L,{get each(){return e.loadedJsonFiles},children:(t,n)=>u(Ce,{get index(){return n()},enableEdition:!0,get selected(){return n()===e.selectedFile},onClick:()=>e.onClickFile(n()),get onEditEnter(){return e.onEditFilename},get text(){return En(t.name)}})}),(()=>{const t=qn.cloneNode(!0),n=t.firstChild;return t.style.setProperty("margin","10px"),n.$$click=()=>e.onCreateNewFile(),t})(),O(()=>e.children)]}});S(["click"]);const Qn=v('<div><input type="button" value="Remove quest file..."></div>'),Ln=v('<div><input type="button" value="Create new quest..."></div>'),Mn=e=>u(Ee,{isDragging:!1,title:"Quests",get children(){return[u(L,{get each(){return e.file?.data},children:(t,n)=>u(Ce,{get index(){return n()},get disabled(){return Boolean(t.disabled)||t.id===""},get selected(){return n()===e.selectedQuest},onClick:()=>e.onClickQuest(n()),get text(){return t.id||"<no id>"}})}),O(()=>e.children),(()=>{const t=Ln.cloneNode(!0),n=t.firstChild;return t.style.setProperty("margin","10px"),n.$$click=()=>e.onCreateNewQuest(),_(t,u(N,{get when(){return(e.file?.data??[]).length===0},get children(){const i=Qn.cloneNode(!0),r=i.firstChild;return r.$$click=()=>e.onRemoveQuestFile(),i}}),null),t})()]}});S(["click"]);const An=v("<div></div>"),Vn=()=>({id:"",trader_id:"prapor"}),On="#737373",Dn="#b3b3b3",Tn={selections:{file:null,quest:0},files:[]},Fn=e=>{const t={};return e.forEach(n=>{n.data.forEach(i=>{t[i.id]=!0,i.locked_by_quests?.forEach(r=>{t[r]=!0}),i.unlock_on_quest_start?.forEach(r=>{t[r]=!0})})}),Object.keys(t)},ye=e=>{const t=e.split("_"),n=t[t.length-1];return se(NaN,Number(n))?null:Number(n)},ve=e=>{const t=e.split("_"),n=t[t.length-1];return se(NaN,Number(n))?null:le(1,t).join("_")},Rn=(e,t)=>{let n=0;const i=e.split("_"),r=i[i.length-1];if(se(NaN,Number(r)))t.forEach(l=>{if(ve(l)===e){const o=ye(l);o!==null&&o>=n&&(n=o+1)}});else{const l=le(1,i).join("_");return n=Number(r),t.forEach(o=>{if(ve(o)===l){const d=ye(o);d!==null&&d>n&&(n=d)}}),l?`${l}_${n+1}`:String(n+1)}return e?`${e}_${n}`:String(n)},jn=()=>{const[e,t]=Fe(Tn),n=E(!1),[i]=n,r=$(()=>e.selections.quest),l=$(()=>e.files[e.selections.file??0]),o=$(()=>{const y=l();if(y)return y.data[e.selections.quest??0]}),d=$(()=>{const y=l();return y?y.data.length:0}),s=$(()=>e.selections.file!==null),a=$(()=>{const y=o(),x=e.selections.file,P=e.selections.quest;if(y&&x!==null&&P!==null)return D=>{t("files",x,"data",P,D)}}),f=()=>{const y=e.selections.file;y!==null&&(t("files",y,"data",x=>[...x,Vn()]),e.selections.quest===null&&t("selections","quest",0))},c=()=>{const y=r(),x=e.selections.file;if(x!==null&&y!==null&&y>0){const P=y;t("files",x,"data",Q=>(t("selections","quest",()=>P-1),G(y,y-1)(Q)))}},g=()=>{const y=r(),x=e.selections.file;if(x!==null&&y!==null&&y<d()-1){const P=y;t("files",x,"data",Q=>(t("selections","quest",()=>P+1),G(y,y+1)(Q)))}},b=()=>{const y=r(),x=e.selections.file;if(x!==null&&y!==null){const P=y;t("files",x,"data",Q=>{if(P===Q.length-1){const D=P===0?null:P-1;t("selections","quest",()=>D)}return J(P,1,Q)})}},m=()=>{const y=r(),x=e.selections.file;if(x!==null&&y!==null){const P=e.files[x].data[y];if(P){const Q=e.files[x].data.map(T=>T.id),D=Rn(P.id,Q);t("files",x,"data",T=>[...T,{...P,id:D}])}}},h=()=>{const y=e.selections.file;y!==null&&t("files",x=>{if(y===x.length-1){const P=y===0?null:y-1;t("selections","file",()=>P)}return J(y,1,x)})},I=(y,x)=>{y&&t("files",x,"name",`${y}.json`)},C=()=>{t("files",y=>[...y,{name:"new_quest_file.json",data:[]}]),e.selections.file===null&&t("selections","file",0)},F=$(()=>Fn(e.files)),B=y=>{t("selections","file",y)},Le=y=>{t("selections","quest",y)};return(()=>{const y=An.cloneNode(!0);return y.style.setProperty("overflow-x","scroll"),y.style.setProperty("height","100vh"),_(y,u(Xe,{get customQuestsVersion(){return de.custom_quests_target_version},get children(){return`Custom Quests Editor v${de.version}`}}),null),_(y,u(et,{isDraggingSignal:n,onDropJson:(x,P)=>{const D=e.files.length;try{const T=At(P);t("files",Me=>[...Me,{name:x,data:T}])}catch(T){console.warn(`Custom Quests Editor: Unable to load json quest file '${x}'`),console.error(`${T}`);return}e.selections.file===null&&B(D)}}),null),_(y,u(Cn,{onEditFilename:I,onCreateNewFile:C,isDragging:i,onClickFile:B,get loadedJsonFiles(){return e.files},get selectedFile(){return e.selections.file},get children(){return u(N,{get when(){return s()},get children(){return u(at,{tabIndex:-1,get loadedJsonFiles(){return e.files},get selectedQuestFile(){return e.selections.file}})}})}}),null),_(y,u(N,{get when(){return s()},get children(){return u(Mn,{onRemoveQuestFile:h,onCreateNewQuest:f,onClickQuest:Le,get file(){return l()},get selectedQuest(){return e.selections.quest}})}}),null),_(y,u(N,{get when(){return O(()=>o()!==void 0,!0)()&&a()!==void 0},get children(){return u(xn,{get nbQuests(){return d()},onMoveUp:c,onMoveDown:g,onRemove:b,onDupliacteQuest:m,get allQuestIds(){return F()},get questIndex(){return r()},get quest(){return o()},get updateQuest(){return a()}})}}),null),p(()=>y.style.setProperty("background-color",i()?On:Dn)),y})()},Qe=document.getElementById("root");if(!Qe)throw new Error("Fatal: no div #root found in the DOM");Re(()=>u(jn,{}),Qe);
